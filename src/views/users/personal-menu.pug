extends personal-layout

block tab_menu
    nav
        #nav-tab.nav.nav-tabs.justify-content-center
            a#menuLogo.nav-item.nav-link.flex-grow-1.disabled( href='#')
                img(src='/img/logoH4.png')
            a#nav-visitors-tab.updateData.nav-item.nav-link.text-success.active(data-toggle='tab', href='#nav-visitors', role='tab', aria-controls='nav-visitors', aria-selected='true')
                | События
            a#nav-patterns-tab.updateData.nav-item.nav-link.text-primary(data-toggle='tab', href='#nav-patterns', role='tab', aria-controls='nav-patterns', aria-selected='false')
                | Шаблоны
            a.nav-item.dropdown
                a.nav-link.dropdown-toggle(data-toggle='dropdown', href='#', role='button', aria-haspopup='true', aria-expanded='false')
                    img(src='/img/admin.png' height='24')
                    = login
                .dropdown-menu.dropdown-menu-right
                    //a.copyLink.dropdown-item(href='#') Получить ссылку
                    a.dropdown-item(href='/'+ login) Перейти страницу подписки
                    .dropdown-divider
                    a.webhookSettings.dropdown-item(href='#', data-toggle="modal", data-target="#webhook-modal-form") Настройка оповещения
                    .dropdown-divider
                    a#logOut.dropdown-item(href='#') Выход
    #nav-tabContent.tab-content
        #nav-visitors.tab-pane.fade.show.active(role='tabpanel', aria-labelledby='nav-visitors-tab')
            block block_visitors
        #nav-patterns.tab-pane.fade(role='tabpanel', aria-labelledby='nav-patterns-tab')
            block block_patterns

    // Modal reschedule event
    #event-modal-form.modal.fade(tabindex='-1', role='dialog', aria-labelledby='newEventModalLabel', aria-hidden='true')
        form
            .modal-dialog.modal-sm(role='document')
                .modal-content
                    .modal-header
                        h5#newEventModalLabel.modal-title Перпланировать событие
                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                            span(aria-hidden='true') ×
                    .modal-body
                        input#modalPatternId(type='text', hidden)
                        input#modalEventId(type='text', hidden)
                        input#oldDate(type='date', hidden)
                        input#oldTime(type='time', hidden)
                        input#eventDuration(type='number', hidden)
                        .form-group
                            label(for='inputDate') Дата
                            input#inputDate.form-control(type='date')
                        .form-group
                            label(for='inputTime') Время
                            input#inputTime.form-control(type='time')
                        .form-group
                            label(for='reScheduledDescription') Причина
                            textarea#reScheduledDescription.form-control(aria-label='With textarea')
                    .modal-footer
                        button.btn.btn-secondary(type='button', data-dismiss='modal') Отмена
                        input.btn.btn-primary(type='submit', value='Сохранить')

    // Modal remove
    #remove-modal-form.modal.fade(tabindex='-1', role='dialog', aria-labelledby='removeModalLabel', aria-hidden='true')
        form
            .modal-dialog(role='document')
                .modal-content
                    .modal-header
                        h5#removeModalLabel.modal-title Подтверждение удаления
                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                            span(aria-hidden='true') ×
                    .modal-body
                        .alert.alert-danger#descriptionText
                            | A simple danger alert—check it out!
                        input#removePatternId(type='text', hidden='')
                        input#removeEventId(type='text', hidden='')
                        .form-group.row
                            label.col-sm-2.col-form-label(for='reason') Причина
                            .col-sm-10
                                textarea#reason.form-control(aria-label='With textarea')
                    .modal-footer
                        button.btn.btn-secondary(type='button', data-dismiss='modal') Отмена
                        input.btn.btn-primary(type='submit', value='Удалить')

    // Modal webhook
    #webhook-modal-form.modal.fade(tabindex='-1', role='dialog', aria-labelledby='webhookModalLabel', aria-hidden='true')
        form
            .modal-dialog(role='document')
                .modal-content
                    .modal-header
                        h5.modal-title Настройка оповещений
                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                            span(aria-hidden='true') ×
                    .modal-body
                        .form-group
                            label(for='aboutData') Информация об организаторе
                            textarea#aboutData.form-control(aria-label='With textarea', aria-describedby='aboutDataHelp')
                            small#aboutDataHelp.font-italic.form-text.text-muted Информация об организаторе будет включена в сообщение оповещения
                        .form-group
                            label(for='apiKey') apiKey
                            .input-group.mb-3
                                input#apiKey.form-control(aria-label='text', aria-describedby='apiKeyHelp', readonly='', value='-')
                                .input-group-append
                                    button#apiKayGenerate.btn.btn-outline-secondary(type='button') Генерировать
                            //small#apiKeyHelp.font-italic.form-text.text-muted apiKey help
                        .form-group
                            label(for='endpointData') Список серверов
                            textarea#endpointData.form-control(aria-label='With textarea', aria-describedby='endpointDataHelp')
                            small#endpointDataHelp.font-italic.form-text.text-muted Строка = URL одного сервера
                    .modal-footer
                        button.btn.btn-secondary(type='button', data-dismiss='modal') Отмена
                        input.btn.btn-primary(type='submit', value='Сохранить')


    //script.
    //    $(document).ready(function () {
    //        $('#remove-modal-form')
    //            .on('show.bs.modal', function () {
    //                console.log('remove-modal-form show')
    //            })
    //            .on('hide.bs.modal', function () {
    //                console.log('remove-modal-form hide')
    //            });
    //
    //        $('.copyLink').click(function () {
    //
    //        })
    //
    //        $('#event-modal-form')
    //            .on('show.bs.modal', function () {
    //                console.log('event-modal-form show')
    //            })
    //            .on('hide.bs.modal', function () {
    //                console.log('event-modal-form hide')
    //            });
    //    })
    //
    //
